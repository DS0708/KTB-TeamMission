# AlphaVantage api 서버 구현하기

## 문제 설명
1. AlphaVantage api 호출은 ip당 25회로 제한된다. 그래서 이를 하루에 한 번 호출하여 DB에 저장하고 이 정보를 제공하는 API 서버가 필요하다.
2. 25회로 하루에 DB 한번 호출하는 것은 적어서, 최소 2번은 호출해야하므로 2개의 public ip가 필요하다.

## 아이디어
- public ip가 2개 필요하므로 다른 VPC환경을 가진 구글 클라우드 서버를 이용하려고 한다.
- 구글 클라우드를 이용하는 이유는 무료로 제공해주는 41만원 상당의 클라우드 비용이 75일 정도 남아있기 때문
- 다른 VPC에 위치해 있는 구글 클라우드 서버 2개를 만들어, 하루에 한 번 AlphaVantage API를 호출해 MongoDB에 저장하고 이를 제공해주는 API 서버를 SpringBoot로 만들어 제공할 예정이다.
- 준비물
    - 구글 클라우드 서버 2개
    - 스프링 부트 프로젝트
    - 몽고DB


## 해결 방법
- 다른 VPC에 있는 구글 클라우드의 VM 2개 만들기
- 하나의 VM에서 MongoDB 세팅
- alphavantageAPI 호출해서 몽고디비에 저장하는 도커 이미지 만들기
- 만들어진 도커 이미지 나의 DockerHub에 배포하기
- 만들어진 서버 환경 세팅하기 - (도커 깔고 DockerHub에 있는 이미지 받아오기)
- 서버에서 도커 이미지 잘 실행되는지 확인하기
- crontab 활용하여 도커 이미지 하루에 한 번 실행시키고 Log 파일 설정
- AlphaVantage API 호출 정보 제공해주는 API 서버 구현하기 (SpringBoot)




## 다른 VPC에 있는 구글 클라우드의 VM 2개 만들기
구글 클라우드에서 VM을 만들기 위해서는 프로젝트를 생성하고 해당 프로젝트에 들어가 VM인스턴스를 만들면 된다. 여기서 기본설정으로 E2시리즈가 선택되어 있고 e2-medium이 vCPU 2개, 코어 1개, 메모리 4GB 정도이며, 월별 예상 가격이 32달러로 지금 선택하기에 괜찮은 조건이여서 일단 이렇게 생성하였다. 그리고 OS는 내가 제일 많이 사용한 Ubuntu로 설정하였다.


